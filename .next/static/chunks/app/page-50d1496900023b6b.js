(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4957:function(e,t,r){Promise.resolve().then(r.bind(r,6911))},6911:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return c}});var a=r(7437),n=r(2265),l=r(6691),o=r.n(l),s=r(5654),i=r(263).Buffer;function c(){let[e,t]=(0,n.useState)(null),[r,l]=(0,n.useState)(null),[c,d]=(0,n.useState)(!1),[u,m]=(0,n.useState)(!1),[h,x]=(0,n.useState)(0),[g,p]=(0,n.useState)(!1),f=(0,n.useRef)(null),b=(0,n.useRef)(null),v=async()=>{m(!0);try{let e=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});f.current&&(f.current.srcObject=e,f.current.play())}catch(e){console.error("Error accessing the camera:",e)}},w=async()=>{if(!e)return;if(h>=5){p(!0);return}d(!0),l(null);let t=new s.$D("AIzaSyAyT74VJyYZWus5KxxX1VhwUxELJkxGIDo").getGenerativeModel({model:"gemini-1.5-flash"});try{let r=await e.arrayBuffer();console.log(i.from(r).toString("base64"));let a=await t.generateContent(["Identifica esta planta y proporciona informaci\xf3n importante sobre ella en espa\xf1ol.",{inlineData:{data:i.from(r).toString("base64"),mimeType:e.type}}]);console.log(a),a.response?(l(a.response.text()),x(h+1)):l("No se pudo obtener una respuesta del modelo. Por favor, intenta de nuevo.")}catch(e){console.error("Error al identificar la planta:",e),l(e instanceof Error?"Error al identificar la planta: ".concat(e.message,". Por favor, verifica tu conexi\xf3n a internet y la clave API."):"Error desconocido al identificar la planta. Por favor, intenta de nuevo.")}finally{d(!1)}};return(0,a.jsxs)("div",{className:"flex flex-col min-h-screen bg-gray-100",children:[(0,a.jsx)("header",{className:"bg-green-600 text-white p-4",children:(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Itzamn\xe1"})}),(0,a.jsxs)("main",{className:"flex-grow container mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"text-center mb-12",children:[(0,a.jsx)("h1",{className:"text-5xl font-bold mb-4 text-green-700",children:"Itzamn\xe1 - Identificador de Plantas"}),(0,a.jsx)("p",{className:"text-xl text-gray-700",children:"Descubre el mundo vegetal con IA"})]}),(0,a.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-lg max-w-2xl mx-auto",children:[u?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("video",{ref:f,className:"w-full rounded-lg mb-4"}),(0,a.jsx)("button",{onClick:()=>{if(f.current){var e;let r=document.createElement("canvas");r.width=f.current.videoWidth,r.height=f.current.videoHeight,null===(e=r.getContext("2d"))||void 0===e||e.drawImage(f.current,0,0),r.toBlob(e=>{if(e){var r;t(new File([e],"captured.png",{type:"image/png"})),m(!1),(null===(r=f.current)||void 0===r?void 0:r.srcObject)instanceof MediaStream&&f.current.srcObject.getTracks().forEach(e=>e.stop())}})}},className:"bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-700 transition-colors w-full mb-4",children:"Capturar Foto"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>{var e;return null===(e=b.current)||void 0===e?void 0:e.click()},className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition-colors mb-4 w-full",children:"Elegir archivo"}),(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{e.target.files&&e.target.files[0]&&t(e.target.files[0])},className:"hidden",ref:b}),(0,a.jsx)("button",{onClick:v,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition-colors mb-4 w-full",children:"Usar C\xe1mara"})]}),e&&(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)(o(),{src:URL.createObjectURL(e),alt:"Planta cargada",width:300,height:300,className:"rounded-lg mx-auto"})}),(0,a.jsx)("button",{onClick:w,disabled:!e||c,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition-colors w-full",children:c?"Identificando...":"Identificar Planta"}),r&&(0,a.jsxs)("div",{className:"mt-8 p-6 bg-white rounded-lg shadow-lg",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold mb-4 text-green-700",children:"Resultado:"}),(0,a.jsx)("p",{className:"text-lg mb-4",children:r}),(0,a.jsxs)("div",{className:"mt-8 border-t pt-4",children:[(0,a.jsxs)("p",{className:"text-gray-500",children:["Creado por ",(0,a.jsx)("strong",{children:"neuralcodelab.com"})]}),(0,a.jsx)("a",{href:"https://www.patreon.com/neuralcodelab",className:"bg-pink-600 text-white px-4 py-2 rounded hover:bg-pink-700 transition-colors mt-4 inline-block",target:"_blank",rel:"noopener noreferrer",children:"Apoyar en Patreon"})]})]}),g&&(0,a.jsxs)("div",{className:"mt-8 p-6 bg-yellow-100 rounded-lg shadow-lg text-center",children:[(0,a.jsx)("p",{className:"text-lg font-semibold mb-4",children:"\xa1Gracias por usar nuestra aplicaci\xf3n!"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"Hemos notado que has usado el servicio varias veces. Si te ha sido \xfatil, considera apoyarnos en Patreon."}),(0,a.jsx)("a",{href:"https://www.patreon.com/neuralcodelab",className:"bg-pink-600 text-white px-4 py-2 rounded hover:bg-pink-700 transition-colors",target:"_blank",rel:"noopener noreferrer",children:"Apoyar en Patreon"})]})]})]})]})}}},function(e){e.O(0,[442,971,938,744],function(){return e(e.s=4957)}),_N_E=e.O()}]);